\begin{Verbatim}[commandchars=@\[\]]
@PYaf[# ActiveRecord - brak XMLa]
@PYaf[# =====================]
@PYaf[# in database.yml]
development:
  adapter: mysql
  database: demo
  username: admin
  password: password
  host: localhost

@PYaf[# create script]
  create table posts(
    @PYaX[id] int auto_increment primary key,
    title varchar(@PYag[75]) )

 ruby script@PYbe[/]generate model post  @PYbe[-]@PYbe[-]skip@PYbe[-]migration @PYaf[#]

 @PYaf[# plik Post.rb]
@PYay[class] @PYaN[Post] @PYbe[<] @PYaq[ActiveRecord]@PYbe[::]@PYaq[Base]
@PYay[end]

@PYaf[# gdzieś w aplikacji]
@PYaq[Post]@PYbe[.]create(@PYat[:title]@PYbe[=]@PYbe[>]@PYaW["]@PYaW[SRUG]@PYaW["])

@PYaf[# ActiveRecord - Migracje]
@PYaf[# =====================]
ruby script@PYbe[/]generate migration add_content_to_posts content@PYat[:string] category_id@PYat[:integer] @PYaf[# sprawdzic !!!]

@PYay[class] @PYaN[AddContentToPosts] @PYbe[<] @PYaq[ActiveRecord]@PYbe[::]@PYaq[Migration]
  @PYay[def] @PYaN[self]@PYbe[.]@PYaK[up]
    add_column @PYat[:posts], @PYat[:content], @PYat[:string]
    add_column @PYat[:posts], @PYat[:category_id], @PYat[:integer]
  @PYay[end]

  @PYay[def] @PYaN[self]@PYbe[.]@PYaK[down]
    remove_column @PYat[:posts], @PYat[:content]
    remove_column @PYat[:posts], @PYat[:category_id]
  @PYay[end]
@PYay[end]

rake db@PYat[:migrate] @PYaf[#]

rake db@PYat[:migrate] @PYaq[VESION]@PYbe[=]@PYag[0]

@PYaf[# ActiveRecord - Asocjacje]
@PYaf[# =====================]
@PYay[class] @PYaN[Post] @PYbe[<] @PYaq[ActiveRecord]@PYbe[::]@PYaq[Base]
  belongs_to @PYat[:category]
  has_many @PYat[:comments]
@PYay[end]

@PYay[class] @PYaN[Category] @PYbe[<] @PYaq[ActiveRecord]@PYbe[::]@PYaq[Base]
  has_many @PYat[:posts]
@PYay[end]

@PYay[class] @PYaN[Comment] @PYbe[<] @PYaq[ActiveRecord]@PYbe[::]@PYaq[Base]
  belongs_to @PYat[:post]
@PYay[end]

post @PYbe[=] @PYaq[Post]@PYbe[.]find @PYag[15]
post@PYbe[.]comments@PYbe[.]find_all_by_content(@PYaW["]@PYaW[Srug]@PYaW["])
post@PYbe[.]comments@PYbe[.]create(@PYat[:content] @PYbe[=]@PYbe[>] @PYbd['cos tam'])
post@PYbe[.]comments@PYbe[.]last
post@PYbe[.]comments@PYbe[.]delete_all

@PYaf[# ActiveRecord - Walidatory]
@PYaf[# =====================]
@PYay[class] @PYaN[Post] @PYbe[<] @PYaq[ActiveRecord]@PYbe[::]@PYaq[Base]
  validates_presence_of @PYat[:title], @PYat[:content]
  validates_uniqueness_of @PYat[:content]
  validates_associated @PYat[:category], @PYat[:on] @PYbe[=]@PYbe[>] @PYat[:create]
  validate @PYat[:my_own_validator]

  @PYay[def] @PYaK[my_own_validator]
    errors@PYbe[.]add(@PYat[:title], @PYaW["]@PYaW[Nie podoba mi się]@PYaW["]) @PYay[unless] title@PYbe[.]nice_and_short?
  @PYay[end]
@PYay[end]

@PYaX[p] @PYbe[=] @PYaq[Post]@PYbe[.]create
@PYaX[p]@PYbe[.]errors@PYbe[.]to_a
@PYaf[# => @lb[]@lb[]"title", "can't be blank"@rb[], @lb[]"content", "can't be blank"@rb[], @lb[]"content", "has already been taken"@rb[]@rb[]]

@PYaX[p] @PYbe[=] @PYaq[Post]@PYbe[.]create(@PYat[:title] @PYbe[=]@PYbe[>]@PYbd['nowy'], @PYat[:content]@PYbe[=]@PYbe[>]@PYbd['hmmm'])
@PYaf[# => <Post id: 3, title: "nowy", content: "hmmm", category_id: nil>]

@PYaf[# ActiveRecord - Callbacki]
@PYaf[# =====================]
@PYay[class] @PYaN[Post] @PYbe[<] @PYaq[ActiveRecord]@PYbe[::]@PYaq[Base]

@PYay[end]
\end{Verbatim}
